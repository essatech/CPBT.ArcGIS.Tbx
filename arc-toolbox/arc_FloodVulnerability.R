tool_exec <- function(in_params, out_params) {
  

# Load package
print("Loading library...")
library(MNAI.CPBT)

# Open raster
print("Open Raster...")
TopoBathy = in_params$TopoBathy
print(TopoBathy)
rr <- arc.open(TopoBathy)
arcraster <- arc.raster(rr)
TopoBathy <- as.raster(arcraster)

print("Loading Bldgs...")
Bldgs0 = in_params$Bldgs
importGeom = arc.open(Bldgs0)
arcgeom = arc.select(importGeom)
Bldgs =  arc.data2sf(arcgeom)


group_col <- in_params$group_col
if(length(group_col) == 0){
  group_col = NA
} else {
  group_col = group_col
}


start_elevation <- in_params$start_elevation
end_elevation <- in_params$end_elevation
step_size <- in_params$step_size

simulation_name <- in_params$simulation_name

dir_output <- in_params$dir_output
print(dir_output)
dir_output <- gsub("\\\\", "/", dir_output)
print(dir_output)


MNAI.CPBT::FloodVulnerabilityStudy(
  Bldgs = Bldgs,
  group_col = group_col,
  TopoBathy = TopoBathy,
  start_elevation = start_elevation,
  end_elevation = end_elevation,
  step_size = step_size,
  simulation_name = simulation_name,
  dir_output = dir_output
)


  
}